<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="https://www.sbcloud.co.jp/icon/favicon"/><noscript></noscript><style data-href="/help/styles.b6078e2fcea366896428.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css?family=Poppins:400,500&display=swap);*{box-sizing:border-box;font-display:swap;margin:0;padding:0}::-webkit-input-placeholder{color:#c2c2c2}:-ms-input-placeholder{color:#c2c2c2}::placeholder{color:#c2c2c2}body,html{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Roboto Light,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px}a{color:#639;transition:color .15s}body{font-family:Roboto}.mainWrapper img{background-color:#f5f7f9;border-radius:1px;padding:1px}.visibleMobile{display:none}.video-responsive{padding-bottom:56.2%;position:relative}a,a:hover{text-decoration:none}.displayInline{display:inline-block}.bannerStripWrapper{background-color:#3d1bb7;box-shadow:0 1px 6px 0 rgba(0,0,0,.4);max-height:56px;padding:0 15px;position:relative}.bannerStripWrapper .displayFlex{align-items:center;display:flex;justify-content:center}.bannerStripWrapper .displayFlex a{flex:1 1}.bannerStripWrapper .bannerStripImg{position:absolute;right:0;top:0}.bannerStripWrapper .bannerStripImg img{max-height:56px;opacity:.4}.bannerStripWrapper .bannerStrip{align-items:center;display:flex;padding:8px 0;position:relative;z-index:10}.bannerStripWrapper .bannerStrip .announceIcon img{margin-right:16px;margin-top:4px;width:32px}.bannerStripWrapper .displayFlex a:focus,.bannerStripWrapper .displayFlex a:hover{text-decoration:none}.bannerStripWrapper .closeBanner{align-items:center;background-color:rgba(61,27,183,.8);border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;margin-left:auto;text-align:right;width:40px;z-index:11}.bannerStripWrapper .closeBanner img{margin-right:0}.bannerStripWrapper .bannerStrip .bodyTextSmall{color:#fff;display:inline-block;font-family:Poppins;font-size:18px;font-weight:400;letter-spacing:normal;line-height:120%;padding-bottom:0;padding-right:10px;padding-top:0;text-align:left}.bannerStripWrapper .bannerStrip .bodyTextSmall .textColor{color:#fff}.bannerStripWrapper .bannerStrip .bodyTextSmall .textColor img{display:inline-block;margin-left:5px;transition:.2s}.bannerStripWrapper .bannerStrip .bodyTextSmall .textColor:hover img{-webkit-transform:translateX(4px);transform:translateX(4px)}.navBarToggle{border:1px solid #fff;border-radius:4px;display:none;height:33px;padding:8px 5px;position:absolute;right:20px;width:36px}.navBarToggle .iconBar{background-color:#fff;border-radius:1px;display:block;height:2px;margin:4px auto 0;width:22px}.navBarToggle .iconBar:first-child{margin-top:0}.video-responsive iframe{height:100%;position:absolute;width:100%}.diffNewLine{background-color:#f0fff4;color:#22863a}.diffRemoveLine{background-color:#fcc;color:red}.navBarParent{align-items:center;display:flex;float:left;width:100%}.divider{border-right:1px solid hsla(0,0%,100%,.3);height:30px;margin:0 15px}.navBarULRight{position:absolute;right:30px}.githubIcon{margin-right:5px;width:15px}.githubSection{align-items:center;color:#000;display:flex;opacity:.7}.githubSection:hover{opacity:1;text-decoration:none}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#17a2b8}.headerWrapper{align-items:center;border-bottom:1px solid #d4dadf;box-shadow:0 1px 1px 0 rgba(116,129,141,.1);display:flex}.formElement{background-color:transparent;border-bottom:1px solid hsla(0,0%,100%,.3);padding:4px}.formElement:focus{border:none;outline:none}.formElement svg path{fill:#fff}.searchInput{background-color:rgba(13,25,130,.9)!important;border-radius:5px;border-width:0!important;color:#fff;max-width:600px;opacity:.6;padding:10px 10px 10px 38px;width:calc(100% - 26px)}.searchInput:focus,.searchInput:focus-within,.searchInput:hover,.searchInput:visited{border:0;outline:none}.searchWrapper{flex:1 1;max-width:600px;padding-left:0;padding-right:20px;position:relative}.searchWrapper a{font-weight:500}.hitWrapper{background-color:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 1px 4px 0 rgba(0,0,0,.16);height:auto;left:0;max-height:80vh;max-width:30em;overflow:scroll;padding:.7em 1em .4em;position:absolute;top:40px;width:80vw}.hitWrapper ul li{border-top:1px solid;list-style-type:none;margin-top:.7em;padding-top:.7em}.hitWrapper ul li:first-child{border-top:0;color:#000!important;margin-top:0;padding:0}.showResults{display:block}.hideResults{display:none}.hitWrapper span{color:#000;font-size:14px}.headerTitle{color:#fff!important;font-size:28px;font-weight:500;height:auto;line-height:1.5}.headerTitle a{color:#fff}.headerTitle a:hover{opacity:.8;text-decoration:none}.logoWrapper{padding:21px 0 21px 20px}.logoContent{font-family:Roboto;font-size:28px;font-weight:500;line-height:1.5;margin-left:16px;padding-right:10px}.navBarDefault{background-color:#f3f3f3;border:0;border-radius:0;box-shadow:-1px 0 4px 1px rgba(23,162,184,.4);-webkit-box-shadow:-1px 0 4px 1px rgba(23,162,184,.4);-moz-box-shadow:-1px 0 4px 1px rgba(23,162,184,.8);-o-box-shadow:-1px 0 4px 1px rgba(23,162,184,.4);margin-bottom:0;padding:5px;position:relative;z-index:1}.navBarDefault,.navBarHeader{align-items:center;display:flex}.navBarHeader{flex:1 1;min-width:335px;padding-right:20px}.navBarBrand{align-items:center;display:flex;padding:0}.navBarBrand img{display:inline-block;margin-right:16px;width:40px}.navBarUL li{list-style-type:none}.navBarUL{-webkit-overflow-scrolling:touch}.navBarUL li a{color:#fff!important;font-family:Roboto;font-size:16px;font-weight:500;line-height:1em;opacity:1;padding:10px 15px}.navBarNav{align-items:center;display:flex}.navBarUL li a .shareIcon,.navBarUL li a img{width:20px}.mainWrapper{color:#3b454e;max-width:750px}.navBarUL li a:hover{opacity:.7}pre{background-color:#f5f7f9; /* !important; */border:0!important}blockquote{border-left:4px solid;border-color:#e6ecf1;color:#74818d;margin:0 0 24px;padding:0 0 0 12px}.mainWrapper ol,.mainWrapper ul{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0;padding:0 0 0 2em}.mainWrapper ol li,.mainWrapper ul li{font-size:16px;font-weight:400;line-height:1.8}.socialWrapper{align-items:center;display:flex}.socialWrapper li{display:inline-block}.socialWrapper li a{display:contents}.discordBtn,.twitterBtn{align-items:center;background-color:#f1f5f8;border:1px solid #d1d2d3;border-radius:4px;cursor:pointer;display:flex;height:30px;justify-content:center;margin-left:8px;opacity:.8;padding-top:2px;width:30px}.discordBtn img,.twitterBtn img{width:25px!important}.discordBtn:hover,.twitterBtn:hover{opacity:1}.sidebarTitle{align-items:center;background-color:#f8f8f8;color:#f3f3f3;display:flex;font-family:Poppins;font-size:18px;font-weight:600;padding:18px 16px}.sideBarShow{display:none}.sidebarTitle a{color:#f3f3f3}.greenCircle{background-color:#1cd3c6;border-radius:50%;height:8px;margin:0 12px;width:8px}.headerNav{color:#17a2b8;font-family:Roboto;font-size:16px;font-weight:500;line-height:1em;padding:0 24px}.headerNav a{color:#17a2b8}.headerNav a,.headerNav a:hover{text-decoration:none}.logoWrapper img{width:40px}.sideBarUL{margin-top:32px}.sideBarUL li{list-style-type:none;width:auto}.sideBarUL li a{border:1px solid transparent;border-right:0;color:hsla(0,0%,100%,.8);font-size:14px;font-weight:500;line-height:1.5;padding:7px 25px 7px 10px}.rightSideTitle{border-left:1px solid #e6ecf1;color:#4c5767;font-size:10px;font-weight:700;letter-spacing:1.2px;line-height:1;padding:7px 24px 7px 16px;text-transform:uppercase}.rightSideBarUL{margin-top:32px}.rightSideBarUL li{border-left:1px solid #e6ecf1;list-style-type:none}.rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px}.hideFrontLine .collapser{background:transparent;border:none;cursor:pointer;outline:none;position:absolute;right:20px;z-index:1}.hideFrontLine .active>a{background-color:#17a2b8;color:hsla(0,0%,100%,.8)!important}.firstLevel ul li .collapser svg path{fill:#fff!important}.active .collapser>svg>path{fill:#639!important}.firstLevel ul .item ul .item{border-left:1px solid #e6ecf1}.sideBarUL .item{list-style:none;padding:0}.sideBarUL .item>a{align-items:center;color:#e6ecf1;display:flex;padding-left:15px;padding-right:35px;position:relative;text-decoration:none;width:100%}.sideBarUL .item>a:hover{background-color:#2fa0c6;color:#fff!important}.showFrontLine .item>a:hover{background-color:#001933}.showFrontLine .active>a{background-color:#001933;color:#fff}.sideBarUL .item .item{margin-left:16px}.firstLevel>ul>.item{margin-left:0!important}.showFrontLine .item .item{border-left:1px solid #e6ecf1;padding:0;width:calc(100% - 16px)!important}.showFrontLine .item .active>a{background-color:#17a2b8;border-color:#e6ecf1!important;border-style:solid none solid solid;border-width:1px 0 1px 1px;color:#fff}.titleWrapper{align-items:center;border-bottom:1px solid #e6ecf1;display:flex;margin-bottom:32px;padding-bottom:40px}.title{border-left:4px solid #17a2b8;flex:1 1;font-size:32px;font-weight:500;line-height:1.5;margin-top:0;padding:0 16px}.gitBtn{align-items:center;display:flex;height:30px;min-height:30px}.gitBtn img{display:inline-block;margin-right:5px;width:15px}.addPaddTopBottom{padding:50px 0}.nextPreviousWrapper{-webkit-column-gap:24px;column-gap:24px;display:grid;grid-template-columns:calc(50% - 8px) calc(50% - 8px);grid-template-rows:auto;margin:0;padding:0;width:auto}.previousBtn{-moz-box-align:center;align-items:center;background-color:#fff;border:1px solid #e6ecf1;border-radius:3px;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);color:#242a31;cursor:pointer;display:flex;flex-direction:row;margin:0;padding:0;place-self:stretch;position:relative;text-decoration:none;transition:border .2s ease 0s}.leftArrow{color:#9daab6;display:block;flex:0 0 auto;font-size:24px;margin:0;padding:16px;transition:color .2s ease 0s}.preRightWrapper{display:block;flex:1 1;margin:0;padding:5px;text-align:right}.smallContent{color:#6e6e6e;display:block;margin:0;padding:0}.smallContent span{font-size:12px;font-weight:400;line-height:1.625}.nextPreviousTitle{display:block;margin:0;padding:0;transition:color .2s ease 0s}.nextPreviousTitle span{font-size:16px;font-weight:500;line-height:1.5}.nextBtn{-moz-box-align:center;align-items:center;background-color:#fff;border:1px solid #e6ecf1;border-radius:3px;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);color:#242a31;cursor:pointer;display:flex;flex-direction:row;margin:0;padding:0;place-self:stretch;position:relative;text-decoration:none;transition:border .2s ease 0s}.rightArrow{color:#9daab6;flex:0 0 auto;font-size:24px;transition:color .2s ease 0s}.nextRightWrapper,.rightArrow{display:block;margin:0;padding:16px}.nextRightWrapper{flex:1 1}.nextBtn:hover,.previousBtn:hover{border:1px solid #17a2b8;color:#17a2b8;text-decoration:none}.nextBtn:hover .rightArrow,.previousBtn:hover .leftArrow{color:#17a2b8}table,table tr{padding:0}table tr{background-color:#fff;border-top:1px solid #ccc;margin:0}table tr:nth-child(2n){background-color:#f8f8f8}table tr th{font-weight:700}table tr td,table tr th{border:1px solid #ccc;margin:0;padding:6px 13px;text-align:left}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td :last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}.githubBtn{font-size:16px;max-height:40px;padding:10px 0 10px 15px}.githubBtn,.githubBtn span span{align-items:center;display:flex}.communitySection{font-size:24px;font-weight:700}.authorSection{padding:20px 0}.authorName,.authorSection{align-items:center;display:flex}.authorImg img{border-radius:50%;height:150px;max-height:150px;max-width:150px;min-height:150px;min-width:150px;width:150px}.author{font-size:20px;font-weight:700;padding-top:5px}.authorDetails{padding-left:10px}.authorDesc{font-size:16px;padding-top:5px}.authorName img{display:inline-block;margin-left:10px;width:20px}.authorName img:hover{opacity:.7}.titlelistSection{padding:10px 0}.titlelistName,.titlelistSection{align-items:center;display:flex}.titlelistImg img{height:120px;max-height:120px;max-width:200px;min-height:120px;min-width:200px;width:200px}.titlelist{font-size:22px;font-weight:700;padding-top:5px}.titlelistDetails{padding-left:10px}.titlelistDesc{font-size:18px;padding-top:5px}.titlelistAuthor,.titlelistDate{font-size:16px;padding-top:5px}.titlelistName img{display:inline-block;margin-left:10px;width:20px}.titlelistName img:hover{opacity:.7}.heading1{font-size:26px;font-weight:800}.heading1,.heading2{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading2{font-size:24px;font-weight:700}.heading3{font-size:20px;font-weight:600}.heading3,.heading4{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading4{font-size:18px;font-weight:500}.heading5{font-size:16px;font-weight:400}.heading5,.heading6{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading6{font-size:14px;font-weight:300}.paragraph{line-height:1.625;margin:16px 0 32px}.pre{font-size:14px;margin:0;overflow:auto;padding:8px}.mainWrapper code{background:#f9f7fb;border:1px solid #ede7f3;border-radius:4px;font-size:.9375em;padding:2px 6px;word-break:break-word}.poweredBy{font-size:.6em;padding:0;text-align:end}.topnav{-webkit-transition:top .5s,bottom .5s}@media (max-width:767px){.bannerStripWrapper{max-height:none}.bannerStripWrapper .bannerStrip{padding-left:0}.bannerStripWrapper .bannerStrip .bodyTextSmall{font-size:15px;line-height:120%;padding-left:8px}.bannerStripWrapper .bannerStripImg{display:none}.responsive{border-top:1px solid #fff;margin-top:15px;padding-bottom:20px;position:relative}.headerTitle{font-size:20px;padding-right:50px}.navBarBrand{min-height:40px}.navBarBrand img{margin-right:8px}.topnav.responsive .visibleMobile{display:block}.topnav .navBarUL{display:none}.topnav.responsive .navBarUL{display:block;text-align:left}.hiddenMobile{display:none!important}hr{margin-bottom:0;margin-top:0}.navBarParent{display:block}.separator{margin-bottom:20px;margin-top:20px}.navBarULRight{position:static}.navBarUL{align-items:center;display:flex;margin:7.5px 0}.navBarUL li{height:37px}.navBarUL li a{font-size:14px;padding:10px 15px}.navBarDefault{display:block}.navBarToggle{display:block;margin-right:0}.navBarHeader{align-items:center;display:flex;min-width:auto;padding-right:0}.navBarBrand{flex:initial;font-size:20px;padding:0 15px 0 0}.titleWrapper{display:block;padding:0 15px}.gitBtn{display:inline-block}.mainWrapper{padding:0 15px}.nextPreviousWrapper{display:block;padding:0 15px}.previousBtn{margin-bottom:20px}.mobileView{padding-left:0!important;text-align:left!important}.searchWrapper{bottom:0;padding:20px 0 0;position:absolute;width:calc(100% - 30px)}.hitWrapper{max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;position:static;right:0;top:35px;width:100%}}@media (min-width:768px) and (max-width:991px){.bannerStripWrapper{padding:0 10px}.bannerStripWrapper .bannerStripImg{display:none}.bannerStripWrapper .bannerStrip .displayFlex{justify-content:flex-start}.bannerStripWrapper .closeBanner{right:0}.navBarDefault{padding:10px}.navBarBrand{font-size:22px}.navBarHeader{flex:initial;min-width:240px}.githubBtn{padding:10px}.divider{height:20px;margin:0 5px}.hitWrapper{max-width:500px}.navBarUL li a{padding:10px 5px}.searchWrapper{padding-left:0}}.mt-16{margin-top:16px}.floating-subscribe-wrapper{position:relative;width:250px;z-index:1}.floating-subscribe-wrapper .floating-subscribe-close{cursor:pointer;opacity:.8;position:absolute;right:24px;top:24px;width:20px}.floating-subscribe-wrapper .floating-subscribe-close:hover{opacity:1}.floating-subscribe-wrapper .floating-subscribe-close:focus{outline:none}.floating-subscribe-wrapper{background:#fff;border-radius:5px;box-shadow:0 2.75335px 44.0535px rgba(0,0,0,.12);padding:24px;text-align:center}.floating-subscribe-wrapper .icon{padding-bottom:24px;text-align:left}.floating-subscribe-wrapper h2{font-family:Roboto;font-size:20px;font-weight:600;line-height:125%;margin:0;padding-bottom:8px;text-align:left}.floating-subscribe-wrapper .pr-40{padding-right:40px}.floating-subscribe-wrapper .post-subscription-description{color:#001934;font-family:Roboto;font-size:14px;font-weight:400;line-height:20px;padding-bottom:16px;text-align:left}.floating-subscribe-wrapper .buttonWrapper{padding-top:8px}.floating-subscribe-wrapper .subscribeBtn{background-color:rgba(30,180,212,.8);border:0;border-radius:5px;color:#fff;cursor:pointer;font-family:Roboto;font-size:14px;font-weight:600;height:36px;padding:2px 5px;transition:.5s;transition:all .2s ease-in-out;width:auto;width:100%}.floating-subscribe-wrapper .subscribeBtn:focus{outline:none}.floating-subscribe-wrapper .subscribeBtn:hover{background-color:#1eb4d4}.floatingShareWrapper,.subscribeIcon{background:#fff;border-radius:8px;bottom:40px;box-shadow:0 4px 64px rgba(0,0,0,.12);display:flex;justify-content:space-around;padding:10px 0;position:fixed;z-index:1}.floatingShareWrapper img,.subscribeIcon img{background-color:#fff;cursor:pointer;-webkit-filter:grayscale(100%);filter:grayscale(100%);margin:0;width:22px}.floatingShareWrapper img:hover,.subscribeIcon img:hover{-webkit-filter:none;filter:none}.floatingShareWrapper .shareIcon,.subscribeIcon .shareIcon{align-items:center;display:flex;height:23px;position:relative}.floatingShareWrapper .shareIcon .copiedWrapper,.subscribeIcon .shareIcon .copiedWrapper{background-color:#000;border-radius:4px;color:#fff;font-size:14px;left:50%;padding:3px 5px;position:absolute;top:-32px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.floatingShareWrapper{right:30px;width:250px}.subscribeIcon{right:305px;width:auto}.subscribeIcon img{margin:0 12px}.floatingSubscribeVisible{bottom:100px;opacity:0;position:fixed;right:30px;-webkit-transform:translateY(150px);transform:translateY(150px);transition:all .3s ease-out;visibility:hidden;z-index:100}.floatingTransition{opacity:1;-webkit-transform:translateY(0);transform:translateY(0);transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out;visibility:visible}@media(max-width:1059px){.mobileShow{display:block}.subscribeIcon{display:none}.mobileFloatingView{padding-bottom:40px;position:relative}.floatingSubscribeVisible{margin-bottom:30px;opacity:1;position:static;-webkit-transform:translateY(0);transform:translateY(0);visibility:visible}.floating-subscribe-wrapper{position:static;width:100%}.floating-subscribe-wrapper .pr-40{padding-right:0}.floatingShareWrapper{border-radius:0;bottom:0;justify-content:space-around;padding:13px 0;right:0;width:100%}}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:100;src:local("Roboto Thin "),local("Roboto-Thin"),url(/help/static/roboto-latin-100-c2aa4ab115bf9c6057cb59709d0e152b.woff2) format("woff2"),url(/help/static/roboto-latin-100-a45108d3b34af91f9113d827a183296d.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:100;src:local("Roboto Thin italic"),local("Roboto-Thinitalic"),url(/help/static/roboto-latin-100italic-7f839a8652da29745ce4260846c3f88e.woff2) format("woff2"),url(/help/static/roboto-latin-100italic-451d4e559d6f57cdf6a1c54a3e32e11d.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:300;src:local("Roboto Light "),local("Roboto-Light"),url(/help/static/roboto-latin-300-37a7069dc30fc663c8781220e5669d25.woff2) format("woff2"),url(/help/static/roboto-latin-300-865f928cbabcc9f8f2b50fb47a20bc63.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:300;src:local("Roboto Light italic"),local("Roboto-Lightitalic"),url(/help/static/roboto-latin-300italic-c64e7e354c88e613c77cab8ac2ebc3ae.woff2) format("woff2"),url(/help/static/roboto-latin-300italic-bd5b7a13f2c52b531a2a787bf6eb4a13.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:400;src:local("Roboto Regular "),local("Roboto-Regular"),url(/help/static/roboto-latin-400-176f8f5bd5f02b3abfcf894955d7e919.woff2) format("woff2"),url(/help/static/roboto-latin-400-49ae34d4cc6b98c00c69ab4c41de3e0c.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:400;src:local("Roboto Regular italic"),local("Roboto-Regularitalic"),url(/help/static/roboto-latin-400italic-d022bc70dc1bf7b3425da9cdaa9841b6.woff2) format("woff2"),url(/help/static/roboto-latin-400italic-b1d9d9904bfca8802a631c45590b9efa.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:500;src:local("Roboto Medium "),local("Roboto-Medium"),url(/help/static/roboto-latin-500-f5b74d7ffcdf85b9dd60130fa0b2c087.woff2) format("woff2"),url(/help/static/roboto-latin-500-cea99d3e3e13a3a599a015c29f1046d0.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:500;src:local("Roboto Medium italic"),local("Roboto-Mediumitalic"),url(/help/static/roboto-latin-500italic-0d8bb5b3ee5f5dac9e446d48480d28a9.woff2) format("woff2"),url(/help/static/roboto-latin-500italic-18d00f739ff1e1c52db1a1c0d9e98129.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:700;src:local("Roboto Bold "),local("Roboto-Bold"),url(/help/static/roboto-latin-700-c18ee39fb002ad58b6dc595476f88fef.woff2) format("woff2"),url(/help/static/roboto-latin-700-2267169ee7270a22a963b2b2bfb7ab0c.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:700;src:local("Roboto Bold italic"),local("Roboto-Bolditalic"),url(/help/static/roboto-latin-700italic-7d8125ff7f707231fd89d9d7109deadf.woff2) format("woff2"),url(/help/static/roboto-latin-700italic-9360531f9bb817f917f01a6d394515f3.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:900;src:local("Roboto Black "),local("Roboto-Black"),url(/help/static/roboto-latin-900-870c8c1486f76054301a22c35403eae1.woff2) format("woff2"),url(/help/static/roboto-latin-900-bac8362e7a6ea60b6983ecf09a411a5e.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:900;src:local("Roboto Black italic"),local("Roboto-Blackitalic"),url(/help/static/roboto-latin-900italic-cb5ad999740e9d8a8bd1b03b379293a9.woff2) format("woff2"),url(/help/static/roboto-latin-900italic-c20d916c1a1b094c1cec7de61e470633.woff) format("woff")}</style><meta name="generator" content="Gatsby 3.14.1"/><link rel="sitemap" type="application/xml" href="/help/sitemap.xml"/><title data-react-helmet="true">APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編</title><link data-react-helmet="true" rel="canonical" href="https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5"/><meta data-react-helmet="true" name="title" content="APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編"/><meta data-react-helmet="true" name="description" content="APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編"/><meta data-react-helmet="true" property="og:title" content="APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編"/><meta data-react-helmet="true" property="og:description" content="APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編"/><meta data-react-helmet="true" property="twitter:title" content="APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編"/><meta data-react-helmet="true" property="twitter:description" content="APIを用いてAlibaba Cloudリソースを自動構築する⑤ - RDS編"/><link crossorigin="" href="https://wcbb1vvlrc-dsn.algolia.net" rel="preconnect"/><link rel="alternate" type="application/rss+xml" title="SBCテクニカルサイト" href="/help/rss.xml"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-85904527-10"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-85904527-10', {"send_page_view":false});
      }
      </script><link as="script" rel="preload" href="/help/webpack-runtime-f52b8b84295071201f6f.js"/><link as="script" rel="preload" href="/help/framework-863eeefb33e68dec2f5f.js"/><link as="script" rel="preload" href="/help/app-247f139b7c63ecc78614.js"/><link as="fetch" rel="preload" href="/help/page-data/developer-tools/DEVTOOL_012_api-orchestration-5/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/help/page-data/sq/d/2211823727.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/help/page-data/sq/d/2619113677.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/help/page-data/sq/d/3706406642.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/help/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div><div class="navBarWrapper"><nav class="navBarDefault"><div class="navBarHeader"><div class="headerTitle displayInline"><a href='https://sbcloud.github.io/help/'><img class='img-responsive' src='https://raw.githubusercontent.com/sbcloud/help/master/src/components/images/TechnicalSite_5.png' alt='Learn logo' /></a></div><span role="button" tabindex="0" class="navBarToggle"><span class="iconBar"></span><span class="iconBar"></span><span class="iconBar"></span></span></div><ul class="socialWrapper visibleMobileView"><li class="divider hiddenMobile"></li><li class="hiddenMobile"><ul class="socialWrapper">
  <li>
  <a href="https://sbcloud.github.io/help/rss.xml" target="_blank" rel="noopener">
    <div class="twitterBtn">
      <img src='https://raw.githubusercontent.com/sbcloud/help/master/src/components/images/rss.svg' alt={'RSS'}/>
    </div>
  </a>
</li></ul></li><li class="githubBtn"><span><a href="https://sbcloud.github.io/help/" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li></ul><div id="navbar" class="topnav"><div class="visibleMobile"><style data-emotion="css 14i6we0">.css-14i6we0{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;background-color:#001934;}@media only screen and (max-width: 1023px){.css-14i6we0{width:100%;height:100vh;}}@media (min-width: 767px) and (max-width: 1023px){.css-14i6we0{padding-left:0;}}@media only screen and (max-width: 767px){.css-14i6we0{padding-left:0px;background-color:#001934;background:#001934;height:auto;}}</style><aside class="css-14i6we0 e13qcebe1"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/help/introduction">はじめに<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/advisory">プロダクト導入アドバイザリ<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/product_service">プロダクトサービス一覧＆紹介<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/migration">マイグレーション<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/DaaS">ソリューション - Cloud Remote Desktop<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/WebApplication-tutorial">Webアプリ開発チュートリアル<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/DataAnalytics-tutorial">データ分析チュートリアル<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/network-connect-case">ネットワーク機器接続パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-serverless">サーバレス活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-computing">コンピューティング活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-storage">ストレージ活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-network">ネットワーク活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Database">Database系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Application">ミドルウェア活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-kubernetes">kubernetes活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-LogService">LogService活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-MaxCompute">MaxCompute活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Hologres">Hologres活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Elasticsearch">Elasticsearch活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-ClickHouse">ApsaraDB for ClickHouse活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-DataLakeAnalytics">DataLakeAnalytics活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-datav">DataV活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-security">Security系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-media">Media系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-iot">IoT系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-AI">AI系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/developer-tools">開発者向けツール<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/Terraform">Terraform<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-3rdParty">外部3rdサービス連携パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/ICP">ICP<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li></ul></li><style data-emotion="css 1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e13qcebe0"><hr/></li><style data-emotion="css 1c0t1ue">.css-1c0t1ue{list-style:none;}.css-1c0t1ue a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-1c0t1ue a:hover{color:rgb(255, 255, 255)!important;}.css-1c0t1ue a svg{float:right;margin-right:1rem;}</style><li class="css-1c0t1ue e13qcebe2"><a href="https://www.sbcloud.co.jp/contact_jp/" to="https://www.sbcloud.co.jp/contact_jp/" target="_blank" rel="noopener noreferrer">お問い合わせ<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li><li class="css-1c0t1ue e13qcebe2"><a href="https://www.sbcloud.co.jp/service/about/ts/" to="https://www.sbcloud.co.jp/service/about/ts/" target="_blank" rel="noopener noreferrer">よくある質問はTSSへ<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside><hr/></div></div></nav></div></div><style data-emotion="css uo9yc3">.css-uo9yc3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}@media only screen and (max-width: 767px){.css-uo9yc3{display:block;}}</style><div class="css-uo9yc3 et716sf4"><style data-emotion="css kmc1lc">.css-kmc1lc{width:298px;}</style><div class="hiddenMobile css-kmc1lc et716sf1"><style data-emotion="css 14i6we0">.css-14i6we0{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;background-color:#001934;}@media only screen and (max-width: 1023px){.css-14i6we0{width:100%;height:100vh;}}@media (min-width: 767px) and (max-width: 1023px){.css-14i6we0{padding-left:0;}}@media only screen and (max-width: 767px){.css-14i6we0{padding-left:0px;background-color:#001934;background:#001934;height:auto;}}</style><aside class="css-14i6we0 e13qcebe1"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/help/introduction">はじめに<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/advisory">プロダクト導入アドバイザリ<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/product_service">プロダクトサービス一覧＆紹介<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/migration">マイグレーション<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/DaaS">ソリューション - Cloud Remote Desktop<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/WebApplication-tutorial">Webアプリ開発チュートリアル<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/DataAnalytics-tutorial">データ分析チュートリアル<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/network-connect-case">ネットワーク機器接続パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-serverless">サーバレス活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-computing">コンピューティング活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-storage">ストレージ活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-network">ネットワーク活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Database">Database系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Application">ミドルウェア活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-kubernetes">kubernetes活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-LogService">LogService活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-MaxCompute">MaxCompute活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Hologres">Hologres活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-Elasticsearch">Elasticsearch活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-ClickHouse">ApsaraDB for ClickHouse活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-DataLakeAnalytics">DataLakeAnalytics活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-datav">DataV活用パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-security">Security系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-media">Media系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-iot">IoT系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-AI">AI系プロダクトサービス<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/developer-tools">開発者向けツール<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/Terraform">Terraform<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/usecase-3rdParty">外部3rdサービス連携パターン<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/help/ICP">ICP<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li></ul></li><style data-emotion="css 1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e13qcebe0"><hr/></li><style data-emotion="css 1c0t1ue">.css-1c0t1ue{list-style:none;}.css-1c0t1ue a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-1c0t1ue a:hover{color:rgb(255, 255, 255)!important;}.css-1c0t1ue a svg{float:right;margin-right:1rem;}</style><li class="css-1c0t1ue e13qcebe2"><a href="https://www.sbcloud.co.jp/contact_jp/" to="https://www.sbcloud.co.jp/contact_jp/" target="_blank" rel="noopener noreferrer">お問い合わせ<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li><li class="css-1c0t1ue e13qcebe2"><a href="https://www.sbcloud.co.jp/service/about/ts/" to="https://www.sbcloud.co.jp/service/about/ts/" target="_blank" rel="noopener noreferrer">よくある質問はTSSへ<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside></div><style data-emotion="css nheu3d">.css-nheu3d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin:0px 88px;margin-top:3rem;}@media only screen and (max-width: 1023px){.css-nheu3d{padding-left:0;margin:0 10px;margin-top:3rem;}}</style><main class="css-nheu3d et716sf3"><style data-emotion="css rnnnrd">@media only screen and (max-width: 50rem){.css-rnnnrd{width:100%;position:relative;}}</style><div class="css-rnnnrd et716sf2"><div class="titleWrapper"><h1 class="title">APIで自動構築⑤ - RDS編</h1><style data-emotion="css nutnxl">.css-nutnxl{display:inline-block;font-size:1.0rem;font-weight:450;line-height:1.6;text-align:left;white-space:nowrap;vertical-align:middle;border-radius:0.25rem;color:#fff;background-color:#17a2b8;}</style><span class="css-nutnxl ei7q9pp1">作成日:<!-- -->2019-06-19</span><style data-emotion="css 1vkevom">.css-1vkevom{padding:1rem 1.5rem;text-align:right;}.css-1vkevom a{font-size:14px;font-weight:500;line-height:1em;-webkit-text-decoration:none;text-decoration:none;color:#555;border:1px solid rgb(211, 220, 228);cursor:pointer;border-radius:3px;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;-webkit-text-decoration:none;text-decoration:none;color:rgb(36, 42, 49);background-color:rgb(255, 255, 255);box-shadow:rgba(116, 129, 141, 0.1) 0px 1px 1px 0px;height:30px;padding:5px 16px;}.css-1vkevom a:hover{background-color:rgb(245, 247, 249);}</style><div class="mobileView css-1vkevom ei7q9pp0"><a href="https://github.com/sbcloud/help/tree/master/content/developer-tools/DEVTOOL_012_api-orchestration-5.md" class="gitBtn"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="Github logo"/> Edit on GitHub</a></div></div><div class="mainWrapper"><h1 class="heading1" id="apiで自動構築⑤-rds編">APIで自動構築⑤ - RDS編</h1><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/000000000000000009.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/000000000000000009.png" alt="img" title="img"/></a>  </p><h1 class="heading1" id="はじめに">はじめに</h1><p class="paragraph"><code>APIを用いてAlibaba Cloudリソースを自動構築する</code>シリーズ第5回目となります。</p><p class="paragraph"><a href="https://sbcloud.github.io/help/developer-tools/DEVTOOL_011_api-orchestration-4" target="_blank" rel="noopener noreferrer">前回の記事</a>では、Server Load Balancerを作成し、RDS経由でECSサーバにログインしました。<br/>
<!-- -->今回はRDBMSサービスであるApsara DB for RDSを作成し、ECSインスタンスからクエリを発行してみたいと思います。</p><h2 class="heading2" id="rds要件">RDS要件</h2><p class="paragraph">簡単な要件は以下の通りです。  </p><p class="paragraph">⦿ DBエンジンはMySQLで構築（Apsara DB for MySQL）<br/>
<!-- -->⦿ リードレプリカ（読み取り専用インスタンス）を構築<br/>
<!-- -->⦿ マスターインスタンス/リードレプリカともにマルチゾーン（A Zone/B Zone）構成  </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155557.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155557.png" alt="RDS構成図" title="RDS構成図"/></a>      </p><p class="paragraph">※<font color="Red">赤字</font>の部分が今回の構築対象となります。</p><h2 class="heading2" id="リードレプリカとは？">リードレプリカとは？</h2><p class="paragraph">読み取り専用のDBインスタンスのことを、<strong>リードレプリカ</strong> と呼びます。<br/>
<!-- -->マスターインスタンスが書き込み/読み取りの双方のリクエストを受け付けるのに対し、リードレプリカは読み取りリクエストのみを受け付けます。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155639.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155639.png" alt="リードレプリカアーキテクチャ" title="リードレプリカアーキテクチャ"/></a>      </p><p class="paragraph">リードレプリカを用いるメリットとして、データベースのパフォーマンス向上が挙げられます。<br/>
<!-- -->更新系クエリはマスターインスタンスに、参照系クエリはリードレプリカに分散させることで、マスターインスタンスの負荷を軽減することが出来ます。<br/>
<!-- -->例えば、大量のデータをDBに格納するアプリケーションがあり、その裏で分析部隊がガリガリデータ解析する、というようなシステムにおいて高い効果が発揮されます。 <sup id="fnref-1"><a href="#fn-1" target="_blank" rel="noopener noreferrer">1</a></sup></p><p class="paragraph">さらに、マスターインスタンスに比べ、料金が<span style="color:#ff0000"><strong>半額近く安くなる</strong></span>こともポイントのひとつです。 <sup id="fnref-2"><a href="#fn-2" target="_blank" rel="noopener noreferrer">2</a></sup><br/>
<!-- -->読み取りリクエストの比率が高いようなシステムにおいては、リードレプリカを採用することでTCOがグッと下がる可能性があります </p><p class="paragraph">ただし、リードレプリカには僅かではありますがレプリカラグが生じるため、<br/>
<!-- -->決済システムなどリアルタイム性が求められる参照ワークロードが存在する場合は、リードレプリカではなくマスターインスタンスを参照するよう注意してください。</p><h1 class="heading1" id="rdsを作成してみよう">RDSを作成してみよう</h1><h2 class="heading2" id="手順">手順</h2><p class="paragraph">RDSを作成し、ECSインスタンスからクエリを発行するまでのおおまかな手順は以下となります。</p><ol><li>DBインスタンス（マスターインスタンス）を作成する  </li><li>手順1で作成したマスターインスタンスにユーザアカウントを作成する   </li><li>手順1で作成したマスターインスタンスにデータベース（スキーマ）を作成する  </li><li>手順1で作成したマスターインスタンスに紐付くリードレプリカインスンタンスを作成する  </li></ol><h2 class="heading2" id="apiリファレンス">APIリファレンス</h2><p class="paragraph">本記事で使用するAPIを紹介します。<br/>
<!-- -->すべてRDS SDKのAPIです。</p><ol><li><a href="https://www.alibabacloud.com/help/doc-detail/26228.htm" target="_blank" rel="noopener noreferrer">CreateDBInstance</a>：DBインスタンスを作成します。  </li><li><a href="https://www.alibabacloud.com/help/doc-detail/26252.htm" target="_blank" rel="noopener noreferrer">CreateReadOnlyDBInstance</a>：リードレプリカを作成します。  </li><li><a href="https://www.alibabacloud.com/help/doc-detail/26258.htm" target="_blank" rel="noopener noreferrer">CreateDatabase</a>：データベースを作成します。  </li><li><a href="https://www.alibabacloud.com/help/doc-detail/26263.htm" target="_blank" rel="noopener noreferrer">CreateAccount</a>：ユーザアカウントを作成します。  </li></ol><h2 class="heading2" id="rdssdkをインポート">RDS SDKをインポート</h2><p class="paragraph">前準備として、RDS用のJava SDKをインポートしておきます。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">dependency</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">groupId</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyun</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">groupId</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">artifactId</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">aliyun</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">java</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">sdk</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">rds</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">artifactId</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token number" style="color:rgb(181, 206, 168)">2.3</span><span class="token number" style="color:rgb(181, 206, 168)">.7</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">version</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">dependency</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div></pre></pre><h1 class="heading1" id="dbインスタンスを作成">DBインスタンスを作成</h1><p class="paragraph">ではさっそく、APIでリソースを構築していきましょう。<br/>
<!-- -->まずはDBインスタンスを作成します。  </p><h2 class="heading2" id="サンプルコード">サンプルコード</h2><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">package</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">alibaba</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">demo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">apisample</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> java</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">io</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IOException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">alibaba</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">demo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">apisample</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">enums</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">zones</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">TokyoZones</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">profile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">v20140815</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">CreateDBInstanceRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">v20140815</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">CreateDBInstanceResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ApiSample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ap-northeast-1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> throws </span><span class="token maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">IAcsClient</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/** ---------------------- ↑ここまで前回のサンプルと同様 ---------------------- */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">CreateDBInstanceRequest</span><span class="token plain"> request </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">CreateDBInstanceRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceDescription</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rds-api-demo-master&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// DBインスタンス名</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setEngine</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;MySQL&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                               </span><span class="token comment" style="color:rgb(106, 153, 85)">// DBエンジン</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setEngineVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;5.6&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                          </span><span class="token comment" style="color:rgb(106, 153, 85)">// エンジンバージョン</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceClass</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rds.mysql.t1.small&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(106, 153, 85)">// DBインスタンスクラス</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceStorage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token maybe-class-name">Integer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">valueOf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// ストレージサイズ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setPayType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Postpaid&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                           </span><span class="token comment" style="color:rgb(106, 153, 85)">// 支払い方法</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setSecurityIPList</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;10.0.1.0/24, 10.0.9.0/24&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ホワイトリスト</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setZoneId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token maybe-class-name">TokyoZones</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token constant" style="color:rgb(100, 102, 149)">ZONE_MULTI_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getZoneId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ゾーンID</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceNetType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Intranet&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                 </span><span class="token comment" style="color:rgb(106, 153, 85)">// 接続タイプ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setInstanceNetworkType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;VPC&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ネットワークタイプ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setVPCId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vpc-6wekbo76l1h7j66b26wxx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">            </span><span class="token comment" style="color:rgb(106, 153, 85)">// VPC ID</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setVSwitchId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vsw-6webaau3xpukx5jzgwk7n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// VSwitch ID</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// DBインスタンス作成</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">CreateDBInstanceResponse</span><span class="token plain"> response </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getAcsResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">println</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;InstanceId:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getDBInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">println</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Endpoint:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getConnectionString</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h4 class="heading4" id="dbインスタンス名">DBインスタンス名</h4><p class="paragraph">DBインスタンスの名前を指定します。<br/>
<!-- -->必須パラメータではありませんが、指定しない場合はリソースIDがそのまま設定されるため、管理上今回は指定しています。</p><h4 class="heading4" id="dbエンジン">DBエンジン</h4><p class="paragraph">DBインスタンスのDBエンジンを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->指定可能な値は、以下の4つです。  </p><ol><li>MySQL  </li><li>SQLServer</li><li>PostgreSQL  </li><li>PPAS  </li></ol><h4 class="heading4" id="エンジンバージョン">エンジンバージョン</h4><p class="paragraph">DBエンジンのバージョンを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->指定可能な値はDBエンジンによって異なり、MySQLの場合は<code>5.5</code>/<code>5.6</code>/<code>5.7</code>の3つバージョンから選択可能です。  </p><h4 class="heading4" id="dbインスタンスクラス">DBインスタンスクラス</h4><p class="paragraph">DBインスタンスのインスタンスタイプを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->指定可能なインスタンスクラスは、DBエンジンやバージョンに依存します。詳細は<a href="https://www.alibabacloud.com/help/doc-detail/26312.htm" target="_blank" rel="noopener noreferrer">こちら</a>を確認してください。<br/>
<!-- -->今回は<code>MySQL5.6</code>における最小スペックである<code>rds.mysql.t1.small</code>を指定しています。  </p><h4 class="heading4" id="ストレージサイズ">ストレージサイズ</h4><p class="paragraph">ストレージのサイズを指定します（GB）。<strong>必須パラメータ</strong> です。<br/>
<!-- -->指定可能な値は、DBエンジン/バージョンやDBインスタンスクラスに依存します。詳細はDBインスタンスクラスと同様<a href="https://www.alibabacloud.com/help/doc-detail/26312.htm" target="_blank" rel="noopener noreferrer">インスタンスタイプリスト</a>をご覧ください。<br/>
<code>MySQL5.6</code> / <code>rds.mysql.t1.small</code>の場合、5GBから2000GBの間で指定出来ます。</p><h4 class="heading4" id="支払い方法">支払い方法</h4><p class="paragraph">DBインスタンスの料金支払い方法を指定します。<strong>必須パラメータ</strong> です。<br/>
<code>Postpaid</code>（従量課金）または<code>Prepaid</code>（サブスクリプション課金）のどちらかを指定します。  </p><h4 class="heading4" id="ホワイトリスト">ホワイトリスト</h4><p class="paragraph">DBインスタンスに接続可能なIPアドレスをCIDR形式で指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->デフォルトでは、<code>127.0.0.1</code>のみ設定されており、同一VPC内のECSインスタンスからでも接続することは出来ません。<br/>
<!-- -->今回はA/Bゾーン双方のECSインスタンスから接続を行うため、各ゾーンのECSが属するVSwitchのCIDR IPを指定しています。<br/>
<!-- -->複数の値を指定する場合は、 <code>,</code>(カンマ)で区切って指定します。  </p><h4 class="heading4" id="ゾーンid">ゾーンID</h4><p class="paragraph">DBインスタンスをデプロイするゾーンを指定します。<br/>
<!-- -->非必須パラメータで、指定しない場合はリージョンやDBエンジンに応じたデフォルトのゾーンに作成されます。<br/>
<!-- -->指定可能なゾーンのIDは、<a href="https://www.alibabacloud.com/help/doc-detail/26243.htm" target="_blank" rel="noopener noreferrer">DescribeRegions</a>から取得出来ます。  </p><p class="paragraph">今回はマルチゾーンで作成するため、<br/>
<!-- -->下記のように<code>TokyoZones</code>に、東京リージョンのマルチゾーン用のゾーンID<code>ap-northeast-1MAZ1(a,b)</code>を追加しています。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">ZONE_MULTI_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ap-northeast-1MAZ1(a,b)&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="接続タイプ">接続タイプ</h4><p class="paragraph">DBインスタンスへの接続方法を指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->指定可能な値は、<code>Internet</code>または<code>Intranet</code>です。  </p><ul><li>⦿ <strong>Internet</strong>：インターネットからアクセス可能なインスタンスを作成する場合に指定します。付与されるエンドポイントはパブリックIPアドレスに解決されます。  </li><li>⦿ <strong>Intranet</strong>：VPC内部からのみアクセス可能なインスタンスを作成する場合に指定します。付与されるエンドポイントはプライベートIPアドレスに解決されます  </li></ul><h4 class="heading4" id="ネットワークタイプ">ネットワークタイプ</h4><p class="paragraph">DBインスタンスをデプロイするネットワークのタイプを指定します。<br/>
<!-- -->指定可能な値は、<code>Classic</code>（クラシックネットワーク）または<code>VPC</code>（VPC）のどちらかです。<br/>
<!-- -->非必須パラメータで、指定しない場合は<code>Classic</code>が設定されます。<br/>
<!-- -->今回はVPC内部に作成するため、<code>VPC</code>を指定しています。</p><h4 class="heading4" id="vpcid">VPC ID</h4><p class="paragraph">DBインスタンスをデプロイするVPCのリソースIDを指定します。<br/>
<!-- -->ネットワークタイプが<code>VPC</code>の場合に必須となる<strong>条件付き必須パラメータ</strong>です。</p><h4 class="heading4" id="vswitchid">VSwitch ID</h4><p class="paragraph">DBインスタンスをデプロイするVSwitchのリソースIDを指定します。<br/>
<!-- -->ネットワークタイプが<code>VPC</code>の場合に必須となる<strong>条件付き必須パラメータ</strong>です。</p><h2 class="heading2" id="実行結果">実行結果</h2><p class="paragraph">下記のように、Console上に作成したDBインスタンスのリソースID、およびエンドポイントが表示されれば成功です。<br/>
<!-- -->これらは今後の手順で使用するので、控えておいてください。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token maybe-class-name">Instance</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ID</span><span class="token plain">：rm</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e9b29d1u37boz6198</span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Endpoint：rm</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e9b29d1u37boz6198</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">japan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">com</span><span class="token plain"></span></div></pre></pre><p class="paragraph">管理コンソール上から作成したDBインスタンスを確認してみましょう。  </p><p class="paragraph"><code>ApsaraDB for RDS</code>　&gt;　<code>インスタンスリスト</code>より、DBインスタンスの一覧を表示します。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617153538.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617153538.png" alt="DBインスタンスコンソール画面" title="DBインスタンスコンソール画面"/></a>      </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617153611.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617153611.png" alt="DBインスタンスコンソール詳細画面" title="DBインスタンスコンソール詳細画面"/></a>      </p><p class="paragraph">無事にDBインスタンスが作成されていることが確認出来ました。</p><h1 class="heading1" id="ユーザ作成">ユーザ作成</h1><p class="paragraph">次に、先程作成したDBインスタンス内にユーザアカウントを作成します。  </p><p class="paragraph">AWSのRDSとは異なり、インスタンス作成時にユーザが作成されないため、<br/>
<!-- -->データベースを操作するためにはインスタンス作成後に別途ユーザアカウントを作成する必要があります。</p><h2 class="heading2" id="サンプルコード">サンプルコード</h2><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">package</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">alibaba</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">demo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">apisample</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> java</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">io</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IOException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">profile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">v20140815</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">CreateAccountRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ApiSample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ap-northeast-1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> throws </span><span class="token maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">IAcsClient</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/** ---------------------- ↑ここまで前述のサンプルと同様 ---------------------- */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> masterInstanceId </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rm-e9b29d1u37boz6198&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">CreateAccountRequest</span><span class="token plain"> request </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">CreateAccountRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">masterInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// DBインスタンスID</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setAccountName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;adminuser&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// ユーザ名</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setAccountPassword</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;********&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(106, 153, 85)">// パスワード</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setAccountType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Super&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">            </span><span class="token comment" style="color:rgb(106, 153, 85)">// アカウントタイプ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// ユーザ作成</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getAcsResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="dbインスタンスid">DBインスタンスID</h4><p class="paragraph">ユーザを作成するDBインスタンスのリソースIDを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->先程作成したDBインスタンスのリソースIDを指定します。</p><h4 class="heading4" id="ユーザ名">ユーザ名</h4><p class="paragraph">ユーザ名を指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->以下の制約があります。  </p><ul><li>⦿2文字以上16文字以内であること  </li><li>⦿英小文字、数字、&quot; _ &quot;（アンダースコア）のみで構成されること  </li><li>⦿英字で始まること</li><li>⦿<a href="https://www.alibabacloud.com/help/doc-detail/26317.htm" target="_blank" rel="noopener noreferrer">禁則文字列</a>ではないこと</li></ul><h4 class="heading4" id="パスワード">パスワード</h4><p class="paragraph">パスワードを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->以下の制約があります。  </p><ul><li>⦿8文字以上32文字以内であること  </li><li>⦿使用可能な特殊文字は<code>!</code>,<code>@</code>,<code>#</code>,<code>$</code>,<code>&amp;</code>,<code>%</code>,<code>^</code>,<code>*</code>,<code>(</code>,<code>)</code>,<code>_</code>,<code>+</code>,<code>-</code>,<code>=</code>  </li><li>⦿英大文字、英小文字、数字、および特殊文字のうち少なくとも3つが含まれていること</li></ul><h4 class="heading4" id="アカウントタイプ">アカウントタイプ</h4><p class="paragraph">ユーザの権限タイプを指定します。<br/>
<!-- -->指定可能な値は、<code>Super</code>（特権ユーザ）または<code>Normal</code>（通常ユーザ）のいずれかです。<br/>
<!-- -->非必須パラメータで、指定しない場合は<code>Normal</code>で作成されます。  </p><h2 class="heading2" id="実行結果">実行結果</h2><p class="paragraph">エラーが発生しなければ、ユーザ作成成功です。<br/>
<!-- -->管理コンソール上から作成したユーザを確認しましょう。  </p><p class="paragraph">先程のDBインスタンスの詳細画面より、<code>アカウント管理</code>を押下します。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617153640.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617153640.png" alt="ユーザ画面" title="ユーザ画面"/></a>      </p><p class="paragraph">正常にユーザが作成されています。</p><h1 class="heading1" id="データベースを作成">データベースを作成</h1><p class="paragraph">前手順までで、DBインスタンスに接続する準備は整いました。  </p><p class="paragraph">ECSインスタンスからDBインスタンスにログインし、DDLを投入することはもちろん可能ですが、<br/>
<!-- -->せっかくなのでAPIを用いてデータベースを作成してみたいと思います。</p><h2 class="heading2" id="サンプルコード">サンプルコード</h2><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">package</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">alibaba</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">demo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">apisample</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> java</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">io</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IOException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">profile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">v20140815</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">CreateDatabaseRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ApiSample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ap-northeast-1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> throws </span><span class="token maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">IAcsClient</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> masterInstanceId </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rm-e9b29d1u37boz6198&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/** ---------------------- ↑ここまで前述のサンプルと同様 ---------------------- */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">CreateDatabaseRequest</span><span class="token plain"> request </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">CreateDatabaseRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">masterInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// DBインスタンスID</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;testdb&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">                </span><span class="token comment" style="color:rgb(106, 153, 85)">// データベース名</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setCharacterSetName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;utf8&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// 文字コード</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// データベース作成</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getAcsResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="dbインスタンスid">DBインスタンスID</h4><p class="paragraph">ユーザを作成するDBインスタンスのリソースIDを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->先程作成したDBインスタンスのリソースIDを指定します。</p><h4 class="heading4" id="データベース名">データベース名</h4><p class="paragraph">データベース名を指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->以下の制約があります。  </p><ul><li>⦿64文字以内であること  </li><li>⦿英小文字、数字、&quot; _ &quot;（アンダースコア）のみで構成されること  </li><li>⦿英字で始まること</li><li>⦿<a href="https://www.alibabacloud.com/help/doc-detail/26317.htm" target="_blank" rel="noopener noreferrer">禁則文字列</a>ではないこと</li></ul><h4 class="heading4" id="文字コード">文字コード</h4><p class="paragraph">データベースで使用する文字コードを指定します。<strong>必須パラメータ</strong> です。<br/>
<!-- -->指定可能な値はDBエンジンに依存し、<code>MySQL</code>の場合は以下の4つから選択します。  </p><ul><li>・<code>utf8</code>  </li><li>・<code>gbk</code>  </li><li>・<code>latin1</code>  </li><li>・<code>utf8mb4</code>  </li></ul><h2 class="heading2" id="実行結果">実行結果</h2><p class="paragraph">エラーが発生しなければデータベース作成成功です。<br/>
<!-- -->管理コンソール上から作成したデータベースを確認しましょう。  </p><p class="paragraph">先程のDBインスタンスの詳細画面より、<code>データベース管理</code>を押下します。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154008.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154008.png" alt="データベース画面" title="データベース画面"/></a>      </p><p class="paragraph">指定したパラメータ通り、データベースが作成されています。</p><h2 class="heading2" id="接続確認">接続確認</h2><p class="paragraph">では、作成したデータベースに接続し、テーブルを作成してみましょう </p><p class="paragraph">まずは、<a href="https://sbcloud.github.io/help/developer-tools/DEVTOOL_011_api-orchestration-4" target="_blank" rel="noopener noreferrer">前回の記事</a>を参考にECSインスタンスにログインします。  </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617163321.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617163321.png" alt="ECSインスタンスログイン" title="ECSインスタンスログイン"/></a>      </p><p class="paragraph">次に、以下のコマンドを実行し、DBインスタンスに接続するためのMySQLクライアントをインストールします。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain"># yum </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">y install mysql</span></div></pre></pre><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617163431.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617163431.png" alt="MySQLインストール" title="MySQLインストール"/></a>      </p><p class="paragraph"><code>完了しました </code>のメッセージが表示されれば、インストール成功です。  </p><p class="paragraph">mysqlコマンドを用い、データベースに接続します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain"># mysql </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h rm</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e9b29d1u37boz6198</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">japan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">com</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">P</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">u adminuser </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">D</span><span class="token plain"> testdb </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">p</span></div></pre></pre><p class="paragraph">※エンドポイントは先程控えたものに変更してください。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154151.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154151.png" alt="DBインスタンス接続" title="DBインスタンス接続"/></a>      </p><p class="paragraph">DBインスタンス、ユーザ、データベースが作成出来ていることが確認出来ました。<br/>
<!-- -->以下の通りDDLを発行し、RDSの管理テーブルを作成してみます。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">CREATE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TABLE</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">db_instances</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   name </span><span class="token function" style="color:rgb(220, 220, 170)">varchar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   id </span><span class="token function" style="color:rgb(220, 220, 170)">char</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">20</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   endpoint </span><span class="token function" style="color:rgb(220, 220, 170)">varchar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">128</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617163658.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617163658.png" alt="RDS管理DB作成" title="RDS管理DB作成"/></a>      </p><p class="paragraph">無事、テーブルが作成出来ました  </p><h1 class="heading1" id="リードレプリカ作成">リードレプリカ作成</h1><p class="paragraph">最後に、先程作成したマスターインスタンスに紐付くリードレプリカを作成します。</p><h2 class="heading2" id="サンプルコード">サンプルコード</h2><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">package</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">alibaba</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">demo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">apisample</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> java</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">io</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IOException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">alibaba</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">demo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">apisample</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">enums</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">zones</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">TokyoZones</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">IAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">exceptions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">profile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">v20140815</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">CreateReadOnlyDBInstanceRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">v20140815</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access maybe-class-name">CreateReadOnlyDBInstanceResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ApiSample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ap-northeast-1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> final </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> throws </span><span class="token maybe-class-name">ServerException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ClientException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">       </span><span class="token maybe-class-name">IAcsClient</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">DefaultAcsClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">           </span><span class="token maybe-class-name">DefaultProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getProfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token constant" style="color:rgb(100, 102, 149)">REGION_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SECRET_ACCESS_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">       </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token plain"> masterInstanceId </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rm-e9b29d1u37boz6198&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/** ---------------------- ↑ここまで前述のサンプルと同様 ---------------------- */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">CreateReadOnlyDBInstanceRequest</span><span class="token plain"> request </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">CreateReadOnlyDBInstanceRequest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">masterInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceDescription</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rds-api-demo-master&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setEngineVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;5.6&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceClass</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;rds.mysql.t1.small&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setDBInstanceStorage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token maybe-class-name">Integer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">valueOf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setPayType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Postpaid&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setZoneId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token maybe-class-name">TokyoZones</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token constant" style="color:rgb(100, 102, 149)">ZONE_MULTI_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getZoneId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setInstanceNetworkType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;VPC&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setVPCId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vpc-6wekbo76l1h7j66b26wxx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setVSwitchId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;vsw-6webaau3xpukx5jzgwk7n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">CreateReadOnlyDBInstanceResponse</span><span class="token plain"> response </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getAcsResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">println</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ReadReplica ID : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getDBInstanceId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">println</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ReadReplica Endpoint : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getConnectionString</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre><p class="paragraph">基本的にマスターインスタンスと同様のため、各パラメータの詳細は省略します。  </p><p class="paragraph">ポイントとなるのは以下の3点です。  </p><ul><li>⦿インスタンスクラスやストレージサイズ等、<strong>マスターインスタンスと異なるスペックで作成可能</strong>  </li><li>⦿現状、リードレプリカを作成可能なマスターインスタンスのDBエンジン/バージョンは<strong><code>MySQL5.6</code></strong> / <strong><code>MySQL5.7</code></strong> のみ <sup id="fnref-3"><a href="#fn-3" target="_blank" rel="noopener noreferrer">3</a></sup>  </li><li>⦿DBエンジンはマスターインスタンスと同様のエンジンでなければならず、バージョンは<strong>マスターインスタンスと同等かそれよりも新しいバージョンに限る</strong>  </li></ul><p class="paragraph">つまり、マスターインスタンス / リードレプリカ の組み合わせは、以下の3つの組み合わせに限られるということになります。  </p><ol><li>M:MySQL5.6 / R:MySQL5.6  </li><li>M:MySQL5.6 / R:MySQL5.7  </li><li>M:MySQL5.7 / R:MySQL5.7</li></ol><h2 class="heading2" id="実行結果">実行結果</h2><p class="paragraph">下記のように、Console上に作成したリードレプリカのリソースID、およびエンドポイントが表示されれば成功です。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token maybe-class-name">ReadReplica</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ID</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> rr</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e9b6m610ix0na8dce</span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Endpoint：rr</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e9b6m610ix0na8dce</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">japan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">aliyuncs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">com</span><span class="token plain"></span></div></pre></pre><p class="paragraph">管理コンソール上から作成したリードレプリカを確認してみましょう。  </p><p class="paragraph"><code>ApsaraDB for RDS</code>　&gt;　<code>インスタンスリスト</code>より、DBインスタンスの一覧を表示します。  </p><p class="paragraph">リードレプリカには自身がリードレプリカであることを示す<strong><code>R</code></strong> アイコンが、<br/>
<!-- -->マスターインスタンスには先程までなかった負荷分散を示すアイコンが付与されていることがわかります。  </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154518.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154518.png" alt="リードレプリカ作成後コンソール画面" title="リードレプリカ作成後コンソール画面"/></a>      </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154547.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154547.png" alt="リードレプリカ詳細画面" title="リードレプリカ詳細画面"/></a>      </p><p class="paragraph">無事にリードレプリカが作成されていることが確認出来ました。</p><h2 class="heading2" id="接続確認">接続確認</h2><p class="paragraph">ではリードレプリカへの接続確認として、以下の2点を確認してみたいと思います。  </p><ol><li>マスターインスタンスとレプリケーションしていること  </li><li>読み取り専用であること</li></ol><h3 class="heading3" id="レプリケーション確認">レプリケーション確認</h3><p class="paragraph">レプリケーション確認として、マスターインスタンスへの変更がリードレプリカにも反映されていることを確認します。  </p><p class="paragraph">先程と同様マスターインスタンスにログインし、<br/>
<!-- -->以下の通りクエリを発行し、RDS管理テーブルにマスターインスタンスの情報を登録します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> db_instances</span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rds-api-demo-master&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rm-e9b29d1u37boz6198&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rm-e9b29d1u37boz6198.mysql.japan.rds.aliyuncs.com&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">FROM</span><span class="token plain"> db_instances</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154750.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154750.png" alt="テーブル作成" title="テーブル作成"/></a>      </p><p class="paragraph">マスターインスタンス上にレコードが登録されました。<br/>
<!-- -->では、リードレプリカにログインし、先程マスターインスタンスに登録したレコードがリードレプリカに同期されていることを確認してみます。  </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154909.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617154909.png" alt="レプリケーション確認" title="レプリケーション確認"/></a>      </p><p class="paragraph">正常にレプリケーションが行われていることが確認出来ました </p><h3 class="heading3" id="読み取り専用確認">読み取り専用確認</h3><p class="paragraph">読み取り専用であることの確認として、リードレプリカに対し<code>INSERT</code>文を発行してみたいと思います。  </p><p class="paragraph">リードレプリカにログイン状態のまま、以下の通り<code>INSERT</code>文を発行してみましょう。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> db_instances</span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rds-api-demo-readreplica&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rr-e9b6m610ix0na8dce&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rr-e9b6m610ix0na8dce.mysql.japan.rds.aliyuncs.com&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155014.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155014.png" alt="読み取り専用確認" title="読み取り専用確認"/></a>      </p><p class="paragraph">上記画像のように、<br/>
<strong><code>このサーバは読み取り専用なので、そのようなクエリは実行出来ません</code></strong><br/>
<!-- -->といったような内容のエラー分が返却されたかと思います。  </p><p class="paragraph">以上の2点を以て、<br/>
<!-- -->リードレプリカが本当にリードレプリカであることを確認出来ました  </p><h1 class="heading1" id="tips">Tips</h1><h2 class="heading2" id="読み書き分離機能について">読み書き分離機能について</h2><p class="paragraph">先程のサンプルでも示したように、<br/>
<!-- -->マスターインスタンスおよびリードレプリカにはそれぞれ個別のエンドポイントが付与されます。  </p><p class="paragraph">そのため、アプリケーションがDBにアクセスする際には、<br/>
<!-- -->書き込み要求はマスターインスタンスのエンドポイントに、読み取り要求はリードレプリカのエンドポイントに、<br/>
<!-- -->といった制御をアプリケーション側で行わなければなりません。</p><p class="paragraph">また、複数台のリードレプリカを構築した場合、リードレプリカ間でどのように負荷分散を行うか、といった点も課題になってきます。</p><p class="paragraph">これらを解決するのが、<strong>読み書き分離機能</strong>（Read/Write Splitting Function）と呼ばれる機能です。<br/>
<!-- -->本機能は、各DBインスタンス個別のエンドポイントとは別に、<strong>読み書き分離エンドポイント</strong> と呼ばれる追加のエンドポイントを付与します。  </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155038.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155038.png" alt="RDSエンドポイント" title="RDSエンドポイント"/></a>      </p><p class="paragraph">上記図に示すように、<br/>
<!-- -->読み書き分離エンドポイントに送信されたリクエストは、クエリが読み取りなのか書き込みなのかを判断し、自動的に振り分けられます。<br/>
<!-- -->さらに、複数のリードレプリカに対し負荷分散も行ってくれます。</p><p class="paragraph">本機能を用いることで、アプリケーション側で複雑な設定をする必要なく、<br/>
<!-- -->単一のエンドポイントを設定するだけで読み書きの分離が可能となります。</p><p class="paragraph">こんな便利な読み書き分離機能ですが、実は日本リージョン未提供の機能となります。<sup id="fnref-4"><a href="#fn-4" target="_blank" rel="noopener noreferrer">4</a></sup><br/>
<!-- -->そこで、本記事では代替策として<code>ProxySQL</code>を用いて読み込み/書き込みリクエストを分離する方法を紹介したいと思います。</p><h3 class="heading3" id="proxysqlとは">ProxySQLとは</h3><p class="paragraph">その名の通り、MySQLのプロキシサーバとして、定義したルールに従いルーティングの振り分けを行うオープンソースのミドルウェアです。<br/>
<!-- -->今回は、既存ECSインスタンス上に<code>ProxySQL</code>をインストールして、読み書き分離機能を具備してみたいと思います。</p><h3 class="heading3" id="準備">準備</h3><p class="paragraph">前準備として、<br/>
<!-- -->複数のリードレプリカで負荷分散されていることを確認するため、リードレプリカをもう一台起動させておきます。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155103.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155103.png" alt="リードレプリカ②" title="リードレプリカ②"/></a>      </p><p class="paragraph">また、<code>ProxySQL</code>が各DBインスタンスに接続するためのDBユーザを作成しておきます。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155125.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155125.png" alt="ProxySQL用ユーザ" title="ProxySQL用ユーザ"/></a>      </p><h3 class="heading3" id="proxysqlインストール">ProxySQLインストール</h3><p class="paragraph">ECSインスタンスにログインし、<code>ProxySQL</code>をインストールします。</p><h4 class="heading4" id="リポジトリ追加">リポジトリ追加</h4><p class="paragraph">下記のコマンドを実行し、<code>ProxySQL</code>のリポジトリをダウンロードします。<br/>
<!-- -->（今回は、<code>CentOS7</code>の最新版をインストールしています。）</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">wget </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">P</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">tmp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">proxysql</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> https</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">com</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">sysown</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">proxysql</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">releases</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">download</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">v2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token number" style="color:rgb(181, 206, 168)">0.4</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">proxysql</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2.0</span><span class="token number" style="color:rgb(181, 206, 168)">.4</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">centos7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">x86_64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rpm</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="proxysqlインストール">ProxySQLインストール</h4><p class="paragraph">下記のコマンドを実行し、<code>ProxySQL</code>をインストールします。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">yum </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">y install </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">tmp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">proxysql</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">proxysql</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2.0</span><span class="token number" style="color:rgb(181, 206, 168)">.4</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">centos7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">x86_64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">rpm</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="proxysql起動">ProxySQL起動</h4><p class="paragraph">下記コマンドを実行し、<code>ProxySQL</code>を起動します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">systemctl start proxysql</span></div></pre></pre><h3 class="heading3" id="proxysql設定">ProxySQL設定</h3><p class="paragraph"><code>ProxySQL</code>の設定はすべて専用の管理コンソール上で行います。  </p><h4 class="heading4" id="管理コンソールログイン">管理コンソールログイン</h4><p class="paragraph">下記のコマンドを実行し、<code>ProxySQL</code>管理コンソールにログインします。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">mysql </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h </span><span class="token number" style="color:rgb(181, 206, 168)">127.0</span><span class="token number" style="color:rgb(181, 206, 168)">.0</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">P</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6032</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">u admin </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">padmin</span></div></pre></pre><h4 class="heading4" id="ホストグループ登録">ホストグループ登録</h4><p class="paragraph">各DBインスタンスが所属するホストグループを登録します。  </p><p class="paragraph">今回は、<br/>
<!-- -->書き込みリクエストのルーティング先となる<code>writer_hostgroup</code>のグループを<code>0</code>、<br/>
<!-- -->読み込み専用のリクエストのルーティング先となる<code>reader_hostgroup</code>のグループを<code>1</code><br/>
<!-- -->として登録します。  </p><p class="paragraph">管理コンソール上で以下のクエリを発行します。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_replication_hostgroups</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">writer_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> reader_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="サーバ登録">サーバ登録</h4><p class="paragraph">振り分け先となるDBインスタンスのエンドポイントを登録していきます。<br/>
<!-- -->マスターインスタンスである<code>rm-e9b29d1u37boz6198</code>は書き込み用ホストグループに、<br/>
<!-- -->リードレプリカである<code>rr-e9b6m610ix0na8dce</code>と<code>rr-e9bopaog80y48ykfi</code>については、読み込み専用ホストグループに登録します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_servers</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">hostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> hostgroup_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rm-e9b29d1u37boz6198.mysql.japan.rds.aliyuncs.com&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_servers</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">hostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> hostgroup_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rr-e9b6m610ix0na8dce.mysql.japan.rds.aliyuncs.com&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_servers</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">hostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> hostgroup_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rr-e9bopaog80y48ykfi.mysql.japan.rds.aliyuncs.com&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="設定の適用・永続化">設定の適用・永続化</h4><p class="paragraph">下記のコマンドを実行し、登録した情報をランタイムに適用、さらにディスクへの永続化を行います。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">LOAD</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SERVERS</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">RUNTIME</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">SAVE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">SERVERS</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">DISK</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="クエリルール登録">クエリルール登録</h4><p class="paragraph">リクエストを振り分ける際のクエリルールを登録します。  </p><p class="paragraph"><code>match_digest</code>にルールを指定します。正規表現を使用可能です。<br/>
<code>destination_hostgroup</code>に振り分け先のホストグループを指定します。  </p><p class="paragraph">今回はサンプルのため、簡単な例のみを定義していますが、
正規表現をうまく使うことで様々なパターンに適応可能なルールを定義することが可能です。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_query_rules</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">rule_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> match_digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> destination_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> apply</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^SELECT&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_query_rules</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">rule_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> match_digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> destination_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> apply</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^UPDATE&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_query_rules</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">rule_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> match_digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> destination_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> apply</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^INSERT&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_query_rules</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">rule_id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> match_digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> destination_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> apply</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^DELETE&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="設定の適用・永続化">設定の適用・永続化</h4><p class="paragraph">先程と同様、登録したクエリルールの情報を適用、永続化します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">LOAD</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">QUERY</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">RULES</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">RUNTIME</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">SAVE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">QUERY</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">RULES</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">DISK</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="実行ユーザ登録">実行ユーザ登録</h4><p class="paragraph">以下のクエリを発行し、前準備で作成した<code>ProxySQL</code>用のユーザを実行ユーザとして登録します。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">INTO</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">mysql_users</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">username</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> password</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> default_hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> default_schema</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> transaction_persistent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;proxyuser&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;********&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;testdb&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="設定の適用・永続化">設定の適用・永続化</h4><p class="paragraph">ユーザ情報の適用・永続化を行います。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">LOAD</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">USERS</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">RUNTIME</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">SAVE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">USERS</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">DISK</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="モニタリングユーザ登録">モニタリングユーザ登録</h4><p class="paragraph">最後に、<code>ProxySQL</code>が各DBインスタンスのモニタリングに用いるユーザの情報を登録します。<br/>
<!-- -->今回は簡単のため、実行ユーザでモニタリングを行います。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">UPDATE</span><span class="token plain"> global_variables </span><span class="token constant" style="color:rgb(100, 102, 149)">SET</span><span class="token plain"> variable_value</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;proxyuser&#x27;</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">WHERE</span><span class="token plain"> variable_name</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;mysql-monitor_username&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">UPDATE</span><span class="token plain"> global_variables </span><span class="token constant" style="color:rgb(100, 102, 149)">SET</span><span class="token plain"> variable_value</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;********&#x27;</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">WHERE</span><span class="token plain"> variable_name</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;mysql-monitor_password&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><h4 class="heading4" id="設定の適用・永続化">設定の適用・永続化</h4><p class="paragraph">モニタリングユーザ設定の適用・永続化を行います。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">LOAD</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VARIABLES</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">RUNTIME</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">SAVE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">MYSQL</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">VARIABLES</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">TO</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">DISK</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><p class="paragraph">以上で<code>ProxySQL</code>の設定は完了となります。</p><h3 class="heading3" id="動作確認">動作確認</h3><p class="paragraph">では、<code>ProxySQL</code>の動作確認を行っていきましょう   </p><p class="paragraph">まずは読み書き分離が行われていることを確認するため、<br/>
<code>INSERT</code>文と<code>SELECT</code>文を発行し、それぞれがマスターインスタンスとリードレプリカに割り振られていることを確認します。  </p><p class="paragraph">コンソールをもうひとつ立ち上げ、以下の通り<code>ProxySQL</code>に対しクエリを発行します。  </p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">mysql </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h </span><span class="token number" style="color:rgb(181, 206, 168)">127.0</span><span class="token number" style="color:rgb(181, 206, 168)">.0</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">P</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6033</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">u proxyuser </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">p</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;INSERT INTO db_instances VALUES(&#x27;rds-api-demo-readreplica&#x27;, &#x27;rr-e9b6m610ix0na8dce&#x27;, &#x27;rr-e9b6m610ix0na8dce.mysql.japan.rds.aliyuncs.com&#x27;);&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">mysql </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h </span><span class="token number" style="color:rgb(181, 206, 168)">127.0</span><span class="token number" style="color:rgb(181, 206, 168)">.0</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">P</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6033</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">u proxyuser </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">p</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SELECT * FROM db_instances;&quot;</span><span class="token plain"></span></div></pre></pre><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617211115.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617211115.png" alt="INSERT・SELECTクエリ発行" title="INSERT・SELECTクエリ発行"/></a>      </p><p class="paragraph">正常にクエリが完了しました。<br/>
<!-- -->なお、別のサーバからクエリを発行する場合は、下記のようにホスト部分に<code>ProxySQL</code>をインストールしたサーバのIPアドレスを指定します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">mysql </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h </span><span class="token number" style="color:rgb(181, 206, 168)">10.0</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token number" style="color:rgb(181, 206, 168)">.168</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token constant" style="color:rgb(100, 102, 149)">P</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6033</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">u proxyuser </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">p</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">e </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SELECT * FROM db_instances;&quot;</span><span class="token plain"></span></div></pre></pre><p class="paragraph">各クエリがどのように割り振られたかは、管理コンソール上から統計情報テーブルを参照することで確認出来ます。<br/>
<code>stats_mysql_connection_pool</code>テーブルでは、<strong>&quot;どのサーバ&quot;</strong> が <strong>&quot;どのくらい&quot;</strong> リクエストを処理したかを、<br/>
<code>stats_mysql_query_digest</code>テーブルでは、<strong>&quot;どのクエリ&quot;</strong> が <strong>&quot;どのホストグループ&quot;</strong> に <strong>&quot;どのくらい&quot;</strong> 割り振られたのか<br/>
<!-- -->を確認出来ます。</p><p class="paragraph">管理コンソール上で以下の通りクエリを発行し、読み書き分離が行われていることを確認します。</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token constant" style="color:rgb(100, 102, 149)">SELECT</span><span class="token plain"> hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> srv_host</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token maybe-class-name">Queries</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">FROM</span><span class="token plain"> stats_mysql_connection_pool</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">SELECT</span><span class="token plain"> hostgroup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> digest_text</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> count_star </span><span class="token constant" style="color:rgb(100, 102, 149)">FROM</span><span class="token plain"> stats_mysql_query_digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155312.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155312.png" alt="結果確認①" title="結果確認①"/></a>      </p><p class="paragraph"><code>INSERT</code>文がマスターインスタンス（<code>rm-e9b29d1u37boz6198</code>）に、<br/>
<code>SELECT</code>文がリードレプリカ（<code>rr-e9bopaog80y48ykfi</code>）にそれぞれ割り振られていることが確認出来ました </p><p class="paragraph">試しに同じ<code>INSERT</code>文を10回発行してみます。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155348.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155348.png" alt="結果確認②" title="img"/></a>      </p><p class="paragraph">全てマスターインスタンスに割り振られていますね。  </p><hr/><p class="paragraph">次に読み取りリクエストがリードレプリカ間で負荷分散されていることを確認してみましょう。</p><p class="paragraph">先程と同様の<code>SELECT</code>文を、66回ほど実行してみます。  </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155427.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155427.png" alt="結果確認③" title="結果確認③"/></a>      </p><p class="paragraph">リードレプリカ①（<code>rr-e9b6m610ix0na8dce</code>）とリードレプリカ②（<code>rr-e9bopaog80y48ykfi</code>）で、均等に33回ずつ割り振られていることが確認出来ました  </p><hr/><p class="paragraph">最後に、<code>DELETE</code>文を発行してみます。</p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617211158.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617211158.png" alt="DELETEクエリ発行" title="DELETEクエリ発行"/></a>      </p><p class="paragraph"><a href="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155513.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/sbcloud/help/master/content/developer-tools/developer-tools_images_17680117127201900000/20190617155513.png" alt="結果確認④" title="結果確認④"/></a>      </p><p class="paragraph">登録したクエリルールが正常に適用されていることがわかります。</p><h1 class="heading1" id="最後に">最後に</h1><p class="paragraph">SLB等に比べて関連コンポーネントが少ないため、比較的スムーズに構築出来たのではないかと思います。<br/>
<!-- -->今回は省略しましたが、ログやバックアップの機能、DBパラメータの設定機能等、RDSには様々なパラメータや機能があるので<br/>
<!-- -->気になった方はドキュメントやAPIリファレンスを参照してみてください。  </p><p class="paragraph">本記事をもって、予定していた構成図における全リソースをAPIで構築することが出来ました。<br/>
<!-- -->第6回では、APIとRAM（Resource Access Management）の関係について紹介したいと思います。</p><div class="footnotes"><hr/><ol><li id="fn-1">なお、Alibaba Cloudでは<a href="https://www.alibabacloud.com/product/maxcompute" target="_blank" rel="noopener noreferrer">MaxCompute</a>や<a href="https://www.alibabacloud.com/product/datav" target="_blank" rel="noopener noreferrer">DataV</a>等、ビックデータ用のプロダクトを数多く提供しています。  <a href="#fnref-1" target="_blank" rel="noopener noreferrer">↩</a></li><li id="fn-2">詳細は<a href="https://www.alibabacloud.com/product/apsaradb-for-rds#pricing" target="_blank" rel="noopener noreferrer">RDSの料金表</a>をご覧ください。<a href="#fnref-2" target="_blank" rel="noopener noreferrer">↩</a></li><li id="fn-3">2019年6月現在<a href="#fnref-3" target="_blank" rel="noopener noreferrer">↩</a></li><li id="fn-4">2019年6月現在<a href="#fnref-4" target="_blank" rel="noopener noreferrer">↩</a></li></ol></div><div id="floating-subscribe" class="floatingSubscribeVisible"><div class="floating-subscribe-wrapper mt-16"><div role="button" tabindex="0" class="floating-subscribe-close"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwIDE2SDIyIiBzdHJva2U9IiNBOEE4QTgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xIDE2QzEgMTkuOTc4MiAyLjU4MDM1IDIzLjc5MzYgNS4zOTM0IDI2LjYwNjZDOC4yMDY0NCAyOS40MTk2IDEyLjAyMTggMzEgMTYgMzFDMTkuOTc4MiAzMSAyMy43OTM2IDI5LjQxOTYgMjYuNjA2NiAyNi42MDY2QzI5LjQxOTYgMjMuNzkzNiAzMSAxOS45NzgyIDMxIDE2QzMxIDEyLjAyMTggMjkuNDE5NiA4LjIwNjQ0IDI2LjYwNjYgNS4zOTM0QzIzLjc5MzYgMi41ODAzNSAxOS45NzgyIDEgMTYgMUMxMi4wMjE4IDEgOC4yMDY0NCAyLjU4MDM1IDUuMzkzNCA1LjM5MzRDMi41ODAzNSA4LjIwNjQ0IDEgMTIuMDIxOCAxIDE2VjE2WiIgc3Ryb2tlPSIjQThBOEE4IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K" alt="Close"/></div><h2 class="pr-40">Alibaba Cloudを始めてみましょう</h2><div class="post-subscription-description">ソフトバンクは、Alibaba Cloudのアカウント開設から、サービス展開までをお手伝いします。</div><div class="buttonWrapper"><a href="https://tm.softbank.jp/form/cloud/iaas/index.php?ref=lp-alibaba" target="_blank" rel="noopener noreferrer"><button class="subscribeBtn">お問い合わせ窓口</button></a></div></div></div><div class="floatingShareWrapper"><a class="shareIcon" href="https://getpocket.com/save?url=https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5" target="_blank" rel="nofollow noopener noreferrer" data-save-url="https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5" data-pocket-count="vertical" data-pocket-align="left"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAzOCAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yLjMzMDM2IDAuNjg3NUgzNC45NTU0QzM2LjI0MTcgMC42ODc1IDM3LjI4NTcgMS43MzM4MyAzNy4yODU3IDMuMDE3ODZWMTUuODM0OEMzNy4yODU3IDI1LjQ3MzIgMjkuNDQ2NCAzMy4zMTI1IDE5LjgwOCAzMy4zMTI1SDE3LjQ3NzdDNy44MzkzMiAzMy4zMTI1IDAgMjUuNDczMiAwIDE1LjgzNDhWMy4wMTc4NkMwIDEuNzMzODMgMS4wNDYzMyAwLjY4NzUgMi4zMzAzNiAwLjY4NzVaTTE2Ljk5NTQgMjMuMzA4MkMxNy40NDk4IDIzLjc2MjYgMTguMDQ2MyAyMy45OTA5IDE4LjY0MjkgMjMuOTkwOUMxOS4yMzk0IDIzLjk5MDkgMTkuODM2IDIzLjc2MjYgMjAuMjkwNCAyMy4zMDgyTDI5LjYxMTMgMTMuOTg3MUMzMC41MjI1IDEzLjA3NiAzMC41MjI1IDExLjYwMzMgMjkuNjExMyAxMC42OTIyQzI4LjcwMDIgOS43ODEwMiAyNy4yMjc1IDkuNzgxMDIgMjYuMzE2NCAxMC42OTIyTDE4LjY0MjkgMTguMzY1N0wxMC45Njk0IDEwLjY5MjJDMTAuMDU4MyA5Ljc4MTAyIDguNTg1NTcgOS43ODEwMiA3LjY3NDQ1IDEwLjY5MjJDNi43NjMzMiAxMS42MDMzIDYuNzYzMzIgMTMuMDc2IDcuNjc0NDUgMTMuOTg3MUwxNi45OTU0IDIzLjMwODJaIiBmaWxsPSIjQThBOEE4Ii8+Cjwvc3ZnPgo=" alt="Pocket"/></a><div class="shareIcon"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMwLjA4ODkgMi4xOTY3NkMyNy4xNTk5IC0wLjczMjI0MyAyMi40MTEzIC0wLjczMjI0MyAxOS40ODIzIDIuMTk2N0wxMy4yMTM5IDguNDY1MDhDMTAuMTg0MiAxMS40OTQ5IDEwLjQ2NDcgMTYuMzIyNCAxMy4yMTM5IDE5LjA3MTdDMTMuNjc0MyAxOS41MzIxIDE0LjE4MzYgMTkuOTA3NSAxNC43MjE1IDIwLjIxNThMMTUuODY1NiAxOS4wNzE3QzE2LjYxNiAxOC4zMjEyIDE2LjM1MTggMTcuNDQzOSAxNi4zMzgzIDE2LjgxMDhDMTYuMTczNiAxNi42OTQxIDE2LjAxMzUgMTYuNTY3OSAxNS44NjU2IDE2LjQyQzE0LjQ1NDggMTUuMDA5MyAxNC4zOTEzIDEyLjU5MSAxNS44NjU2IDExLjExNjdDMTYuMDg0NSAxMC44OTc4IDIyLjAwMSA0Ljk4MTMzIDIyLjEzMzggNC44NDg0NUMyMy41OTYzIDMuMzg2MDEgMjUuOTc0NyAzLjM4NjAxIDI3LjQzNzIgNC44NDg0NUMyOC44OTk2IDYuMzEwODkgMjguODk5NiA4LjY4OTMzIDI3LjQzNzIgMTAuMTUxOEwyMy4yOTM4IDE0LjI5NTFDMjMuNDEzNyAxNC45NTggMjQuMTMyNyAxNi41Mjg0IDIzLjc2MjggMTkuMTE4OUMyMy43ODA5IDE5LjEwMTIgMjMuODAyNSAxOS4wODk3IDIzLjgyMDUgMTkuMDcxOEwzMC4wODg5IDEyLjgwMzRDMzMuMDE3OCA5Ljg3NDM5IDMzLjAxNzggNS4xMjU3NiAzMC4wODg5IDIuMTk2NzZaIiBmaWxsPSIjQThBOEE4Ii8+CjxwYXRoIGQ9Ik0xOS44NDMgMTIuNDQyOUMxOS4zODI3IDExLjk4MjUgMTguODczMyAxMS42MDcxIDE4LjMzNTUgMTEuMjk4OEwxNy4xOTE0IDEyLjQ0MjlDMTYuNDQwOSAxMy4xOTMzIDE2LjcwNTEgMTQuMDcwNiAxNi43MTg2IDE0LjcwMzZDMTYuODgzNCAxNC44MjA0IDE3LjA0MzYgMTQuOTQ2NiAxNy4xOTE0IDE1LjA5NDVDMTguNjAyMyAxNi41MDUzIDE4LjY2NTcgMTguOTIzNSAxNy4xOTE0IDIwLjM5NzhDMTYuOTcyIDIwLjYxNzIgMTAuNTY1NSAyNy4wMjM3IDEwLjQzNzMgMjcuMTUxOUM4Ljk3NDg3IDI4LjYxNDMgNi41OTY0MyAyOC42MTQzIDUuMTMzOTkgMjcuMTUxOUMzLjY3MTU1IDI1LjY4OTUgMy42NzE1NSAyMy4zMTEgNS4xMzM5OSAyMS44NDg2TDkuNzYzMTkgMTcuMjE5NEM5LjY0MzM3IDE2LjU1NjUgOC45MjQyNSAxNC45ODYxIDkuMjk0MTkgMTIuMzk1NkM5LjI3NjEyIDEyLjQxMzMgOS4yNTQzNyAxMi40MjQ5IDkuMjM2MzcgMTIuNDQyOEwyLjQ4MjMgMTkuMTk3Qy0wLjQ0NjU3NSAyMi4xMjYgLTAuNDQ2NTc1IDI2Ljg3NDcgMi40ODIzIDI5LjgwMzdDNS40MTEzMSAzMi43MzI1IDEwLjE1OTkgMzIuNzMyNSAxMy4wODg5IDI5LjgwMzdMMTkuODQzIDIzLjA0OTVDMjIuODE2NSAyMC4wNzYgMjIuNjU0IDE1LjI1MzggMTkuODQzIDEyLjQ0MjlaIiBmaWxsPSIjQThBOEE4Ii8+Cjwvc3ZnPgo=" alt="Copy"/></div><a class="HatenaShareButton" href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5+&amp;title=APIで自動構築⑤ - RDS編" target="_blank" rel="nofollow noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgNTAwIj4KCTxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiByeD0iMTAxLjkiIHJ5PSIxMDEuOSIgZmlsbD0iIzAwYTRkZSIvPgoJPGcgZmlsbD0iI2ZmZiI+CgkJPHBhdGggZD0iTTI3OC4yLDI1OC4xcS0xMy42LTE1LjItMzcuOC0xN2MxNC40LTMuOSwyNC44LTkuNiwzMS40LTE3LjNzOS44LTE3LjgsOS44LTMwLjdBNTUsNTUsMCwwLDAsMjc1LDE2NmE0OC44LDQ4LjgsMCwwLDAtMTkuMi0xOC42Yy03LjMtNC0xNi02LjktMjYuMi04LjZzLTI4LjEtMi40LTUzLjctMi40SDExMy42VjM2My42aDY0LjJxMzguNywwLDU1LjgtMi42YzExLjQtMS44LDIwLjktNC44LDI4LjYtOC45YTUyLjUsNTIuNSwwLDAsMCwyMS45LTIxLjRjNS4xLTkuMiw3LjctMTkuOSw3LjctMzIuMUMyOTEuOCwyODEuNywyODcuMywyNjguMiwyNzguMiwyNTguMVptLTEwNy03MS40aDEzLjNxMjMuMSwwLDMxLDUuMmM1LjMsMy41LDcuOSw5LjUsNy45LDE4cy0yLjksMTQtOC41LDE3LjQtMTYuMSw1LTMxLjQsNUgxNzEuMlYxODYuN1ptNTIuOCwxMzAuM2MtNi4xLDMuNy0xNi41LDUuNS0zMS4xLDUuNUgxNzEuMlYyNzNoMjIuNmMxNSwwLDI1LjQsMS45LDMwLjksNS43czguNCwxMC40LDguNCwyMFMyMzAuMSwzMTMuNCwyMjMuOSwzMTcuMVoiLz4KCQk8cGF0aCBkPSJNMzU3LjYsMzA2LjFhMjguOCwyOC44LDAsMSwwLDI4LjgsMjguOEEyOC44LDI4LjgsMCwwLDAsMzU3LjYsMzA2LjFaIi8+CgkJPHJlY3QgeD0iMzMyLjYiIHk9IjEzNi40IiB3aWR0aD0iNTAiIGhlaWdodD0iMTUxLjUyIi8+Cgk8L2c+Cjwvc3ZnPgo=" alt="Hatena"/></a><a class="shareIcon" href="https://www.facebook.com/sharer/sharer.php?u=https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5" target="_blank" rel="nofollow noopener noreferrer"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjIxNDM3OTgyOTIxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIyNjAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMiAwQzIyOS4wNTI2MzIgMCAwIDIyOS4wNTI2MzIgMCA1MTJzMjI5LjA1MjYzMiA1MTIgNTEyIDUxMiA1MTItMjI5LjA1MjYzMiA1MTItNTEyUzc5NC45NDczNjggMCA1MTIgMHogbTEyMi43NDUyNjMgNTEyaC03OS4zODY5NDd2MjY5LjQ3MzY4NGgtMTE3LjkyMTY4NFY1MTJIMzc3LjI2MzE1OHYtOTIuODMzNjg0aDYwLjE3MzQ3NHYtNTYuNjQzMzY5YzAtNzQuNjk4MTA1IDMzLjY4NDIxMS0xMTkuOTk2NjMyIDEyNy41MTQ5NDctMTE5Ljk5NjYzMWg3OS4zODY5NDd2OTIuODMzNjg0aC00OC4xMjhjLTM2LjEwOTQ3NCAwLTM4LjQ4MDg0MiAxMy42MDg0MjEtMzguNDgwODQyIDM2LjIxNzI2M3Y0NS4yOTg1MjZINjQ2LjczNjg0Mkw2MzQuNzE4MzE2IDUxMnoiIGZpbGw9IiMzYjU5OTgiIHAtaWQ9IjIyNjEiPjwvcGF0aD48L3N2Zz4=" alt="Facebook"/></a><a class="shareIcon" href="https://twitter.com/intent/tweet?&amp;text=APIで自動構築⑤ - RDS編&amp;url=https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5" target="_blank" rel="nofollow noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDEiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCA0MSAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQwLjU2MDMgNC41MjU3M0MzOS4wNjk2IDUuMTk3NDMgMzcuNDYyOCA1LjYzODgyIDM1Ljc5NzkgNS44NDk5M0MzNy41MDE1IDQuODMyNzkgMzguODE4IDMuMjIwNzMgMzkuNDM3NSAxLjI4MjQzQzM3LjgzMDYgMi4yNDE5OSAzNi4wNDk1IDIuOTEzNjggMzQuMTcxNyAzLjI5NzVDMzIuNjQyMyAxLjY0NzA2IDMwLjQ5MzQgMC42ODc1IDI4LjA1NDEgMC42ODc1QzIzLjUwNDYgMC42ODc1IDE5Ljc4NzYgNC4zNzIyMSAxOS43ODc2IDguOTIwNTFDMTkuNzg3NiA5LjU3MzAxIDE5Ljg2NSAxMC4yMDYzIDIwLjAwMDYgMTAuODAxMkMxMy4xMDg2IDEwLjQ1NTggNi45NzE2MyA3LjE3NDEyIDIuODg2NzggMi4yMDM2QzIuMTcwNDggMy40MTI2NSAxLjc2Mzk0IDQuODMyNzkgMS43NjM5NCA2LjMyOTcxQzEuNzYzOTQgOS4xODkxOSAzLjIxNTkgMTEuNzIyNCA1LjQ2MTU5IDEzLjE2MThDNC4wODcwNyAxMy4xNjE4IDIuODA5MzUgMTIuNzc3OSAxLjY4NjUgMTIuMjAyMkMxLjY4NjUgMTIuMjAyMiAxLjY4NjUgMTIuMjAyMiAxLjY4NjUgMTIuMjU5OEMxLjY4NjUgMTYuMjUxNSA0LjU1MTcgMTkuNTkwOCA4LjM0NjE1IDIwLjMzOTNDNy42NDkyMSAyMC41MzEyIDYuOTEzNTUgMjAuNjI3MSA2LjE1ODUzIDIwLjYyNzFDNS42MzU4MyAyMC42MjcxIDUuMTEzMTIgMjAuNTY5NiA0LjYwOTc4IDIwLjQ3MzZDNS42NTUxOSAyMy43MTY5IDguNjk0NjIgMjYuMTM1IDEyLjM1MzYgMjYuMTkyNkM5LjUyNzA4IDI4LjQxODcgNS45NDU1OCAyOS43MjM3IDIuMDM0OTcgMjkuNzIzN0MxLjM3Njc1IDI5LjcyMzcgMC43MTg1MjUgMjkuNjg1NCAwLjA2MDMwMjcgMjkuNjA4NkMzLjczODYgMzEuOTQ5OSA4LjExMzg0IDMzLjMxMjUgMTIuNzk4OCAzMy4zMTI1QzI4LjA1NDEgMzMuMzEyNSAzNi40MzY3IDIwLjc2MTUgMzYuNDM2NyA5Ljg4MDA3QzM2LjQzNjcgOS41MTU0NCAzNi40MzY3IDkuMTcgMzYuNDE3NCA4LjgwNTM3QzM4LjA0MzYgNy42NTM5IDM5LjQzNzUgNi4xOTUzNyA0MC41NjAzIDQuNTI1NzNaIiBmaWxsPSIjQThBOEE4Ii8+Cjwvc3ZnPgo=" alt="Twitter"/></a><a class="shareIcon" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5&amp;title=APIで自動構築⑤ - RDS編&amp;summary=APIで自動構築⑤ - RDS編&amp;source=https://sbcloud.github.io/help//help//developer-tools/DEVTOOL_012_api-orchestration-5" target="_blank" rel="nofollow noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAzNCAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI5LjY4NTMgMC42ODc1QzMwLjY0NjcgMC42ODc1IDMxLjU2ODcgMS4wNjk0MiAzMi4yNDg2IDEuNzQ5MjRDMzIuOTI4NCAyLjQyOTA2IDMzLjMxMDMgMy4zNTEwOSAzMy4zMTAzIDQuMzEyNVYyOS42ODc1QzMzLjMxMDMgMzAuNjQ4OSAzMi45Mjg0IDMxLjU3MDkgMzIuMjQ4NiAzMi4yNTA4QzMxLjU2ODcgMzIuOTMwNiAzMC42NDY3IDMzLjMxMjUgMjkuNjg1MyAzMy4zMTI1SDQuMzEwM0MzLjM0ODg5IDMzLjMxMjUgMi40MjY4NiAzMi45MzA2IDEuNzQ3MDQgMzIuMjUwOEMxLjA2NzIyIDMxLjU3MDkgMC42ODUzMDMgMzAuNjQ4OSAwLjY4NTMwMyAyOS42ODc1VjQuMzEyNUMwLjY4NTMwMyAzLjM1MTA5IDEuMDY3MjIgMi40MjkwNiAxLjc0NzA0IDEuNzQ5MjRDMi40MjY4NiAxLjA2OTQyIDMuMzQ4ODkgMC42ODc1IDQuMzEwMyAwLjY4NzVIMjkuNjg1M1pNMjguNzc5IDI4Ljc4MTJWMTkuMTc1QzI4Ljc3OSAxNy42MDc5IDI4LjE1NjUgMTYuMTA1IDI3LjA0ODQgMTQuOTk2OUMyNS45NDAzIDEzLjg4ODggMjQuNDM3NCAxMy4yNjYyIDIyLjg3MDMgMTMuMjY2MkMyMS4zMjk3IDEzLjI2NjIgMTkuNTM1MyAxNC4yMDg3IDE4LjY2NTMgMTUuNjIyNVYxMy42MTA2SDEzLjYwODRWMjguNzgxMkgxOC42NjUzVjE5Ljg0NTZDMTguNjY1MyAxOC40NSAxOS43ODkxIDE3LjMwODEgMjEuMTg0NyAxNy4zMDgxQzIxLjg1NzcgMTcuMzA4MSAyMi41MDMxIDE3LjU3NTUgMjIuOTc5IDE4LjA1MTNDMjMuNDU0OCAxOC41MjcyIDIzLjcyMjIgMTkuMTcyNiAyMy43MjIyIDE5Ljg0NTZWMjguNzgxMkgyOC43NzlaTTcuNzE3OCAxMC43NjVDOC41MjUzOSAxMC43NjUgOS4yOTk4OSAxMC40NDQyIDkuODcwOTQgOS44NzMxNEMxMC40NDIgOS4zMDIwOSAxMC43NjI4IDguNTI3NTggMTAuNzYyOCA3LjcyQzEwLjc2MjggNi4wMzQzNyA5LjQwMzQzIDQuNjU2ODcgNy43MTc4IDQuNjU2ODdDNi45MDU0MSA0LjY1Njg3IDYuMTI2MjkgNC45Nzk2IDUuNTUxODUgNS41NTQwNEM0Ljk3NzQgNi4xMjg0OSA0LjY1NDY4IDYuOTA3NjEgNC42NTQ2OCA3LjcyQzQuNjU0NjggOS40MDU2MiA2LjAzMjE4IDEwLjc2NSA3LjcxNzggMTAuNzY1Wk0xMC4yMzcyIDI4Ljc4MTJWMTMuNjEwNkg1LjIxNjU1VjI4Ljc4MTJIMTAuMjM3MloiIGZpbGw9IiNBOEE4QTgiLz4KPC9zdmc+Cg==" alt="Linkedin"/></a></div></div><div class="addPaddTopBottom"><div class="nextPreviousWrapper"><a class="previousBtn" href="/help/developer-tools/DEVTOOL_011_api-orchestration-4"><div class="leftArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></g></svg></div><div class="preRightWrapper"><div class="smallContent"><span>Previous</span></div><div class="nextPreviousTitle"><span>APIで自動構築④ - SLB編</span></div></div></a><a class="nextBtn" href="/help/developer-tools/DEVTOOL_013_api-orchestration-6"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>APIで自動構築⑥ - RAM編</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div></div></main><div class="hiddenMobile css-kmc1lc et716sf0"><style data-emotion="css ry06yn">.css-ry06yn{width:100%;background-color:#fff;border-right:1px solid #ede7f3;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;}@media only screen and (max-width: 50rem){.css-ry06yn{width:100%;position:relative;}}</style><aside class="css-ry06yn et2uw8a1"><ul class="rightSideBarUL"><li class="rightSideTitle">CONTENTS</li><style data-emotion="css 1pnmh51">.css-1pnmh51{list-style:none;}.css-1pnmh51 a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 3rem;display:block;position:relative;}.css-1pnmh51 a:hover{color:#17a2b8!important;}.css-1pnmh51 a svg{float:right;margin-right:1rem;}</style><li class="css-1pnmh51 et2uw8a0"><a href="#apiで自動構築⑤-rds編" to="#apiで自動構築⑤-rds編">APIで自動構築⑤ - RDS編</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#はじめに" to="#はじめに">はじめに</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#rdsを作成してみよう" to="#rdsを作成してみよう">RDSを作成してみよう</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#dbインスタンスを作成" to="#dbインスタンスを作成">DBインスタンスを作成</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#ユーザ作成" to="#ユーザ作成">ユーザ作成</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#データベースを作成" to="#データベースを作成">データベースを作成</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#リードレプリカ作成" to="#リードレプリカ作成">リードレプリカ作成</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#tips" to="#tips">Tips</a></li><li class="css-1pnmh51 et2uw8a0"><a href="#最後に" to="#最後に">最後に</a></li></ul></aside></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/developer-tools/DEVTOOL_012_api-orchestration-5";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7cd22481d4abc7b2281e.js"],"app":["/app-247f139b7c63ecc78614.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/help/polyfill-7cd22481d4abc7b2281e.js" nomodule=""></script><script src="/help/app-247f139b7c63ecc78614.js" async=""></script><script src="/help/framework-863eeefb33e68dec2f5f.js" async=""></script><script src="/help/webpack-runtime-f52b8b84295071201f6f.js" async=""></script><script defer="">
            function navBarClose() {
              document.getElementById("navbar").classList.toggle("responsive");
            }
            document.addEventListener('click',function(e){
              if(e.target && e.target.tagName.toLowerCase() === 'a'){
                navBarClose();
              }
           });
            </script></body></html>